(this.webpackJsonpphotowall=this.webpackJsonpphotowall||[]).push([[0],{38:function(t,e,n){t.exports=n(59)},43:function(t,e,n){},59:function(t,e,n){"use strict";n.r(e);var a={};n.r(a),n.d(a,"startAddingPost",(function(){return S})),n.d(a,"startLoadingPost",(function(){return _})),n.d(a,"startRemovingPost",(function(){return C})),n.d(a,"startAddingComment",(function(){return k})),n.d(a,"startLoadingComments",(function(){return w})),n.d(a,"loadComments",(function(){return I})),n.d(a,"removePost",(function(){return T})),n.d(a,"addPost",(function(){return L})),n.d(a,"addComment",(function(){return x})),n.d(a,"loadPosts",(function(){return M}));var o=n(1),r=n.n(o),c=n(27),i=n.n(c),s=(n(43),n(12)),u=n(11),l=n(25),m=n(19),p=n(24),d=[];var f=Object(u.c)({posts:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"REMOVE_POST":return[].concat(Object(l.a)(t.slice(0,e.index)),Object(l.a)(t.slice(e.index+1)));case"ADD_POST":return[].concat(Object(l.a)(t),[e.post]);case"LOAD_POSTS":return e.posts;default:return t}},comments:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"ADD_COMMENT":return t[e.postId]?Object(p.a)(Object(p.a)({},t),{},Object(m.a)({},e.postId,[].concat(Object(l.a)(t[e.postId]),[e.comment]))):Object(p.a)(Object(p.a)({},t),{},Object(m.a)({},e.postId,[e.comment]));case"LOAD_COMMENTS":return e.comments;default:return t}}}),h=n(21),b=n(13),v=n(14),E=n(16),O=n(15);var g=function(t){return r.a.createElement("h1",null,t.title)};var j=function(t){var e=t.post;return r.a.createElement("figure",{className:"figure"},r.a.createElement(s.b,{to:"/single/".concat(e.id)},r.a.createElement("img",{className:"photo",src:e.imageLink,alt:e.description})),r.a.createElement("figcaption",null,r.a.createElement("p",null,e.description)),r.a.createElement("div",{className:"button-container"},r.a.createElement("button",{onClick:function(){t.startRemovingPost(t.index,e.id),t.history.push("/")}},"Remove"),r.a.createElement(s.b,{to:"/single/".concat(e.id),className:"button"},r.a.createElement("div",{className:"comment-count "},r.a.createElement("div",{className:"speech-bubble"}),t.comments[e.id]?t.comments[e.id].length:0))))};var y=function(t){return r.a.createElement("div",null,r.a.createElement(s.b,{className:"addIcon",to:"/AddPhoto"}," "),r.a.createElement("div",{className:"photo-grid"},t.posts.sort((function(t,e){return e.id-t.id})).map((function(e,n){return r.a.createElement(j,Object.assign({key:n,post:e},t,{index:n}))}))))},A=function(t){Object(E.a)(n,t);var e=Object(O.a)(n);function n(){return Object(b.a)(this,n),e.apply(this,arguments)}return Object(v.a)(n,[{key:"handleSubmit",value:function(t){t.preventDefault();var e=t.target.elements.link.value,n=t.target.elements.description.value,a={id:Number(new Date),imageLink:e,description:n};n&&e&&(this.props.startAddingPost(a),this.props.onHistory.push("/"))}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"form"},r.a.createElement("form",{onSubmit:this.handleSubmit.bind(this)},r.a.createElement("input",{type:"text",name:"link",placeholder:"Link"}),r.a.createElement("input",{type:"text",name:"description",placeholder:"Description"}),r.a.createElement("button",null,"Post"))))}}]),n}(o.Component),N=n(4),P=n(33);P.initializeApp({apiKey:"AIzaSyC_Uq2LAMqbRlQm6Jb1hwTnq2XNft9IC6s",authDomain:"photowall-d9668.firebaseapp.com",databaseURL:"https://photowall-d9668.firebaseio.com",projectId:"photowall-d9668",storageBucket:"photowall-d9668.appspot.com",messagingSenderId:"1019499229607",appId:"1:1019499229607:web:1db2e147ad6551d10f0682",measurementId:"G-1NBF1C996T"});var D=P.database();function S(t){return function(e){return D.ref("posts").update(Object(m.a)({},t.id,t)).then((function(){e(L(t))})).catch((function(t){console.log(t)}))}}function _(){return function(t){return D.ref("posts").once("value").then((function(e){var n=[];e.forEach((function(t){n.push(t.val())})),t(M(n))})).catch((function(t){console.log(t)}))}}function C(t,e){return function(n){return D.ref("posts/".concat(e)).remove().then((function(){n(T(t))})).catch((function(t){console.log(t)}))}}function k(t,e){return function(n){return D.ref("comments/"+e).push(t).then((function(){n(x(t,e))})).catch((function(t){console.log(t)}))}}function w(){return function(t){return D.ref("comments").once("value").then((function(e){var n={};e.forEach((function(t){n[t.key]=Object.values(t.val())})),t(I(n))}))}}function I(t){return{type:"LOAD_COMMENTS",comments:t}}function T(t){return{type:"REMOVE_POST",index:t}}function L(t){return{type:"ADD_POST",post:t}}function x(t,e){return{type:"ADD_COMMENT",comment:t,postId:e}}function M(t){return{type:"LOAD_POSTS",posts:t}}var R=function(t){Object(E.a)(n,t);var e=Object(O.a)(n);function n(){return Object(b.a)(this,n),e.apply(this,arguments)}return Object(v.a)(n,[{key:"handleSubmit",value:function(t){t.preventDefault();var e=t.target.elements.comment.value;this.props.startAddingComment(e,this.props.id)}},{key:"render",value:function(){return r.a.createElement("div",{className:"comment"},this.props.comments&&this.props.comments.map((function(t,e){return r.a.createElement("p",{key:e},t)})),r.a.createElement("form",{className:"comment-form",onSubmit:this.handleSubmit.bind(this)},r.a.createElement("input",{type:"text",placeholder:"comment",name:"comment"}),r.a.createElement("input",{type:"submit",hidden:!0})))}}]),n}(o.Component),W=function(t){Object(E.a)(n,t);var e=Object(O.a)(n);function n(){return Object(b.a)(this,n),e.apply(this,arguments)}return Object(v.a)(n,[{key:"render",value:function(){var t=this.props,e=t.match,n=t.posts,a=Number(e.params.id),o=n.find((function(t){return t.id===a})),c=this.props.comments[e.params.id]||[],i=this.props.posts.findIndex((function(t){return t.id===a}));return!0===this.props.loading?r.a.createElement("div",{className:"loader"}," ...loading "):o?r.a.createElement("div",{className:"single-photo"},r.a.createElement(j,Object.assign({post:o},this.props,{index:i})),r.a.createElement(R,{startAddingComment:this.props.startAddingComment,comments:c,id:a})):r.a.createElement("h1",null," ...no post found ")}}]),n}(o.Component),X=function(t){Object(E.a)(n,t);var e=Object(O.a)(n);function n(){var t;Object(b.a)(this,n);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(t=e.call.apply(e,[this].concat(o))).state={loading:!0},t}return Object(v.a)(n,[{key:"componentDidMount",value:function(){var t=this;this.props.startLoadingPost().then((function(){t.setState({loading:!1})})),this.props.startLoadingComments()}},{key:"render",value:function(){var t=this;return r.a.createElement("div",null,r.a.createElement(s.b,{to:"/PhotoWall-App/",style:{textDecoration:"none"}},r.a.createElement(g,{title:"PhotoWall"})),r.a.createElement(N.a,{path:"/PhotoWall-App/",exact:!0,render:function(){return r.a.createElement("div",null,r.a.createElement(y,t.props))}}),r.a.createElement(N.a,{path:"/PhotoWall-App/AddPhoto",exact:!0,render:function(e){var n=e.history;return r.a.createElement(A,Object.assign({},t.props,{onHistory:n}))}}),r.a.createElement(N.a,{path:"/PhotoWall-App/single/:id",render:function(e){return r.a.createElement(W,Object.assign({},t.props,{loading:t.state.loading},e))}}))}}]),n}(o.Component);var U=Object(N.e)(Object(h.b)((function(t){return{posts:t.posts,comments:t.comments}}),(function(t){return Object(u.b)(a,t)}))(X));var V=Object(h.b)((function(t){return{posts:t}}))(U),q=n(37),B=Object(u.e)(f,Object(u.d)(Object(u.a)(q.a),window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()));i.a.render(r.a.createElement(h.a,{store:B},r.a.createElement(s.a,{basename:"/PhotoWall-App"},r.a.createElement(V,null))),document.getElementById("root"))}},[[38,1,2]]]);
//# sourceMappingURL=main.ccc1d1a7.chunk.js.map